<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Carte des départements français</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

    <style>
        #map {
            height: 100vh;
            width: 100%;
        }
    </style>
</head>

<div id="dept-info"
    style="position: absolute; bottom: 30px; right: 10px; background: white; padding: 12px 18px; border-radius: 8px; box-shadow: 1px 1px 6px #999; z-index: 1000; font-family: sans-serif; font-size: 15px; min-width: 220px;">
    <b>Département</b><br>
    <span style="color:#999">Cliquez sur un département</span>
</div>


<body>

    <input type="file" id="file-input" accept=".xlsx,.xls" />
    <input type="text" id="dept-search" maxlength="2" placeholder="N° département (ex : 75)"
        style="position:absolute;top:30px;left:50%;transform:translateX(-50%);z-index:1002;padding:8px 18px;border-radius:6px;border:1px solid #bbb;font-size:16px;width:220px;">

    <div id="exceptions-panel" style="position:absolute;top:30px;left:10px;background:white;z-index:1100;
            padding:0;border-radius:10px;box-shadow:1px 1px 6px #aaa;
            min-width:280px;max-width:420px;font-family:sans-serif;">
        <div id="exceptions-header" style="display:flex;align-items:center;justify-content:space-between;
              padding:12px 18px;cursor:pointer;">
            <b>Départements sans client</b>
            <span id="exceptions-toggle" style="font-size:18px;line-height:1;user-select:none;">&#9660;</span>
        </div>
        <div id="exceptions-list" style="margin:10px 0 10px 18px;max-height:350px;overflow:auto;"></div>
    </div>

    <div id="dept-clients"
        style="position: absolute; top: 30px; right: 10px; background: white; padding: 14px 20px; border-radius: 8px; box-shadow: 1px 1px 6px #999; z-index: 1002; font-family: sans-serif; min-width: 280px; max-width:350px;">
        <b>Clients du département</b>
        <select id="client-dropdown" style="width:100%;margin-top:8px;font-size:15px;padding:6px;">
            <option value="">Sélectionnez un client</option>
        </select>
        <div id="client-detail" style="margin-top:10px;font-size:14px;color:#333;"></div>
    </div>

    <div id="map"></div>
    <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>

    <div id="legend"
        style="position: absolute; bottom: 30px; left: 10px; background: white; padding: 10px 18px; border-radius: 8px; box-shadow: 1px 1px 6px #999; z-index: 1000; font-family: sans-serif; font-size: 14px;">
        <b>Légende</b>
        <div id="legend-content"></div>
    </div>

    <script src="script.js"></script>

</body>

</html>